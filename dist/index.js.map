{"version":3,"sources":["enums.js","event.class.js","core.js","index.js"],"names":["TIME_UNIT","MILLISECOND","SECOND","MINUT","HOUR","TIME_UNIT_VALUE","TIME_UNIT_TEXT","Event","timeTrigger","callback","timeUnit","triggered","timerId","uuid","generateUUID","replace","c","r","Math","random","v","toString","Chronologie","events","timestampStart","timestampEnd","event","Error","push","Date","now","console","log","intervalId","length","forEach","evt","setTimeout","isAllEventsTriggered","stop","clearTimeout","convertToMillisecondes","findIndex","value","unit","result","start","module","exports","ChronologieEnum","ChronologieEvent"],"mappings":"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","file":"index.js","sourceRoot":"..\\src","sourcesContent":["export const TIME_UNIT = {\r\n    MILLISECOND: 'MILLISECOND',\r\n    SECOND: 'SECOND',\r\n    MINUT: 'MINUT',\r\n    HOUR: 'HOUR'\r\n}\r\n\r\nexport const TIME_UNIT_VALUE = {\r\n    MILLISECOND: 1,\r\n    SECOND: 1000,\r\n    MINUT: 60000,\r\n    HOUR: 3600000\r\n}\r\n\r\nexport const TIME_UNIT_TEXT = {\r\n    MILLISECOND: 'ms',\r\n    SECOND: 's',\r\n    MINUT: 'mn',\r\n    HOUR: 'h'\r\n}","import { TIME_UNIT } from './enums'\r\n\r\nexport default class Event {\r\n    constructor(timeTrigger, callback, timeUnit) {\r\n        this.timeTrigger = timeTrigger\r\n        this.timeUnit = timeUnit || TIME_UNIT.MILLISECOND\r\n        this.callback = callback\r\n        this.triggered = false\r\n        this.timerId = null\r\n        this.uuid = generateUUID()\r\n    }\r\n}\r\n\r\nfunction generateUUID() {\r\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\r\n        var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8)\r\n        return v.toString(16)\r\n    })\r\n}","import { TIME_UNIT_VALUE, TIME_UNIT } from './enums'\r\n\r\nexport default class Chronologie {\r\n    constructor () {\r\n        this.events = []\r\n        this.timestampStart = null\r\n        this.timestampEnd = null\r\n    }\r\n\r\n    addEvent (event) {\r\n        if (!event?.timeTrigger) {\r\n            throw Error('Event format unvalid. Missing \\'timeTrigger\\' attribute.')\r\n            return\r\n        }\r\n\r\n        if (!event?.callback) {\r\n            throw Error('Event format unvalid. Missing \\'callback\\' function.')\r\n            return\r\n        }\r\n\r\n        this.events.push(event)\r\n    }\r\n\r\n    start () {\r\n        this.timestampStart = Date.now()\r\n        console.log('ChronologieJS : START', this.timestampStart, 'ms')\r\n        if (this.intervalId) {\r\n            throw Error('You already start the chronologie.')\r\n            return\r\n        }\r\n\r\n        if (this.events?.length === 0) {\r\n            throw Error('You have no events set. Use the addEvent() method.')\r\n            return\r\n        }\r\n\r\n        this.events.forEach(evt => {\r\n            evt.timerId = setTimeout(() => {\r\n                console.log('ChronologieJS: event', evt.uuid ,' triggered at ', Date.now())\r\n                evt.callback()\r\n                evt.triggered = true\r\n                if(this.isAllEventsTriggered()) {\r\n                    this.stop()\r\n                }\r\n                clearTimeout(evt.timerId)\r\n            }, this.convertToMillisecondes(evt.timeTrigger, evt.timeUnit))\r\n        })\r\n    }\r\n\r\n    isAllEventsTriggered () {\r\n        return this.events.findIndex(evt => evt.triggered === false) === -1\r\n    }\r\n\r\n    convertToMillisecondes (value, unit) {\r\n        let result = value\r\n        switch (unit) {\r\n            case TIME_UNIT.SECOND: \r\n                result = value * TIME_UNIT_VALUE.SECOND\r\n                break;\r\n            case TIME_UNIT.MINUT: \r\n                result = (value*60) * TIME_UNIT_VALUE.SECOND\r\n                break;\r\n            case TIME_UNIT.HOUR: \r\n                result = ((value*60)*60) * TIME_UNIT_VALUE.SECOND\r\n                break;\r\n        }\r\n        return result\r\n    } \r\n\r\n    isStarted () {\r\n        return !!this.intervalId\r\n    }\r\n\r\n    stop () {\r\n        this.timestampEnd = Date.now()\r\n        console.log('ChronologieJS: STOP duration ', (this.timestampEnd - this.timestampStart), 'ms')\r\n        this.events.forEach(evt => {\r\n            if (!evt.triggered) {\r\n                clearTimeout(evt.timerId)\r\n            }\r\n            evt.triggered = false\r\n        })\r\n    }\r\n\r\n    restart () {\r\n        this.stop()\r\n        this.start()\r\n    }\r\n}","import ChronologieEnum from './enums'\r\nimport ChronologieEvent from './event.class'\r\nimport Chronologie from './core'\r\n\r\nmodule.exports = {\r\n    ChronologieEnum,\r\n    ChronologieEvent,\r\n    Chronologie\r\n}"]}