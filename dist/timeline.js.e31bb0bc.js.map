{"version":3,"sources":["js/chronologiejs/enums.js","js/chronologiejs/index.js","js/chronologiejs/event.class.js","index.js"],"names":["TIME_UNIT","MILLISECOND","SECOND","MINUT","HOUR","TIME_UNIT_VALUE","TIME_UNIT_TEXT","Chronologie","verbose","intervalId","intervalTime","elapsedTime","events","timestampStart","timestampEnd","event","timeTrigger","Error","callback","push","Date","now","console","log","length","forEach","evt","triggered","setInterval","eventIdx","findIndex","convertToMillisecondes","timeUnit","eventElement","document","querySelector","innerHTML","idx","newElement","createElement","appendChild","value","unit","result","clearInterval","stop","start","Event","window","onload","startBtn","stopBtn","restartBtn","chronologie","addEvent","addEventListener","e","error","restart"],"mappings":";;AGAA;;AACA;;AACA,AHFO,IAAMA,SAAS,GAAG;AACrBC,AEDJ,ADAA,EDCIA,WAAW,EAAE,aADQ;AAErBC,EAAAA,MAAM,EAAE,QAFa;AAGrBC,EAAAA,KAAK,EAAE,OAHc;AGIzB6C,AHAI5C,EAAAA,IGAE,AHAE,CGAD6C,CHAG,KGAV,GAAgB,YAAM;AAAA,AHJG,CAAlB,GEEcF,QACjB,eAAa/B,WAAb,EAA0BE,QAA1B,EAAoCc,QAApC,EAA8C;AAAA;ACG9C,AHCG,IAAM3B,EGDH6C,QAAQ,GAAGhB,EHCO,GAAG,GGDF,CAACC,aAAT,CAAuB,QAAvB,CAAjB;AACA,AHCAlC,AEJI,EFIJA,IGDMkD,CDHGnC,MCGI,AHCF,EAAE,CGDGkB,AHAW,EEHvB,GAAmBlB,GCGC,CAACmB,ODHrB,MCGY,CAAuB,OAAvB,CAAhB;AACA,AHCAjC,AEJI,EFIJA,ECPiBK,EEMX6C,CDHGpB,CFIH,EAAE,IAFmB,CEFvB,CCGY,EDHIA,CCGDE,ODHS,CCGD,CAACC,EDHInC,WCGb,CAAuB,KDHAE,KCGvB,CAAnB,ADHI;ACKJ,AHAAC,AEJI,ADHJ,EDOAA,IGAMkD,CHAD,AEJInC,EFIF,KAHoB,CEDvB,ECIa,CDJGA,ECIA,IAAIX,CFPM,CCG1B,YCIgB,EAApB;AAEA8C,AHDAjD,AEJI,ADJ0B,EES9BiD,AHDAjD,IAAI,CEJKuB,CFIH,ACROnB,KESF,CAAC8C,CFTkB,CCI1B,GAAiB,GCKrB,CAAqB,CDLjB,GCKqBP,cAAJ,CAAW,CAAX,EAAc,YAAM,6BFTlB,KAAO;AESazB,AHLhB,AEC1B,CFDE,GGKwCA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BH,IAAI,CAACC,GAAL,EAA1B;AAAsC,AFTnD,GEST,EAA8DrB,iBAAUE,MAAxE,CAArB;AACAmD,AHCG,EGDHA,EHCS/C,SGDE,CAACgD,IHCW,GAAG,CGD1B,CAAqB,IAAIP,cAAJ,CAAW,CAAX,EAAc,YAAM;AAAEzB,AHE3CrB,ACXI,EDWJA,EGF2CqB,KFTlCb,EESyC,CAACc,CHExC,EGFgC,AHE9B,CGF0C,GHC7B,ACVtB,GAAkB,IAAlB,EESuC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","file":"timeline.js.e31bb0bc.js","sourceRoot":"..","sourcesContent":["export const TIME_UNIT = {\r\n    MILLISECOND: 'MILLISECOND',\r\n    SECOND: 'SECOND',\r\n    MINUT: 'MINUT',\r\n    HOUR: 'HOUR'\r\n}\r\n\r\nexport const TIME_UNIT_VALUE = {\r\n    MILLISECOND: 1,\r\n    SECOND: 1000,\r\n    MINUT: 60000,\r\n    HOUR: 3600000\r\n}\r\n\r\nexport const TIME_UNIT_TEXT = {\r\n    MILLISECOND: 'ms',\r\n    SECOND: 's',\r\n    MINUT: 'mn',\r\n    HOUR: 'h'\r\n}","import { TIME_UNIT_VALUE, TIME_UNIT_TEXT, TIME_UNIT } from './enums'\r\n\r\nexport default class Chronologie {\r\n    constructor (verbose = false) {\r\n        this.intervalId = null\r\n        this.intervalTime = 40\r\n        this.elapsedTime = 0\r\n        this.events = []\r\n        this.verbose = verbose\r\n        this.timestampStart = null\r\n        this.timestampEnd = null\r\n    }\r\n\r\n    addEvent (event) {\r\n        if (!event?.timeTrigger) {\r\n            throw Error('Event format unvalid. Missing \\'timeTrigger\\' attribute.')\r\n            return\r\n        }\r\n\r\n        if (!event?.callback) {\r\n            throw Error('Event format unvalid. Missing \\'callback\\' function.')\r\n            return\r\n        }\r\n\r\n        this.events.push(event)\r\n    }\r\n\r\n    start () {\r\n        this.timestampStart = Date.now()\r\n        console.log('START', this.timestampStart, 'ms')\r\n        if (this.intervalId) {\r\n            throw Error('You already start the chronologie.')\r\n            return\r\n        }\r\n\r\n        if (this.events?.length === 0) {\r\n            throw Error('You have no events set. Use the addEvent() method.')\r\n            return\r\n        }\r\n\r\n        this.events.forEach(evt => evt.triggered = false)\r\n\r\n        this.elapsedTime = 0\r\n\r\n        this.intervalId = setInterval(() => {\r\n            this.elapsedTime++\r\n            \r\n            if (this.verbose) console.log('Elapsed Time', this.elapsedTime, ' ms')\r\n\r\n            const eventIdx = this.events.findIndex(evt => {\r\n                return (\r\n                    this.convertToMillisecondes(evt.timeTrigger, evt.timeUnit) <= this.elapsedTime\r\n                    && evt.triggered === false\r\n                )\r\n            })\r\n\r\n            const event = this.events[eventIdx]\r\n\r\n            if (event) {\r\n                event.callback()\r\n                event.triggered = true\r\n                \r\n                const eventElement = document.querySelector('#events')\r\n                eventElement.innerHTML = ''\r\n                let idx = 0\r\n                this.events?.forEach(evt => {\r\n                    const newElement = document.createElement('p')\r\n                    newElement.innerHTML = `${idx} : ${evt.timeTrigger} ${evt.timeUnit} => ${evt.triggered}`\r\n                    eventElement.appendChild(newElement)\r\n                    idx++\r\n                })\r\n            }\r\n        }, 1)\r\n    }\r\n\r\n    convertToMillisecondes (value, unit) {\r\n        let result = value\r\n        switch (unit) {\r\n            case TIME_UNIT.SECOND: \r\n                result = value * TIME_UNIT_VALUE.SECOND\r\n                break;\r\n            case TIME_UNIT.MINUT: \r\n                result = (value*60) * TIME_UNIT_VALUE.SECOND\r\n                break;\r\n            case TIME_UNIT.HOUR: \r\n                result = ((value*60)*60) * TIME_UNIT_VALUE.SECOND\r\n                break;\r\n        }\r\n        return result\r\n    } \r\n\r\n    isStarted () {\r\n        return !!this.intervalId\r\n    }\r\n\r\n    stop () {\r\n        this.timestampEnd = Date.now()\r\n        console.log('STOP', (this.timestampEnd - this.timestampStart), 'ms')\r\n        if (this.intervalId) {\r\n            clearInterval(this.intervalId)\r\n            this.intervalId = null\r\n        }\r\n    }\r\n\r\n    restart () {\r\n        this.stop()\r\n        this.start()\r\n    }\r\n}","import { TIME_UNIT } from './enums'\r\n\r\nexport default class Event {\r\n    constructor (timeTrigger, callback, timeUnit) {\r\n        this.timeTrigger = timeTrigger\r\n        this.timeUnit = timeUnit || TIME_UNIT.SECOND\r\n        this.callback = callback\r\n        this.triggered = false\r\n    }\r\n}","import Chronologie from './js/chronologiejs/index'\r\nimport Event from './js/chronologiejs/event.class'\r\nimport { TIME_UNIT } from './js/chronologiejs/enums'\r\n\r\nwindow.onload = () => {\r\n\r\n    const startBtn = document.querySelector('#start')\r\n    const stopBtn = document.querySelector('#stop')\r\n    const restartBtn = document.querySelector('#restart')\r\n\r\n    const chronologie = new Chronologie()\r\n\r\n    chronologie.addEvent(new Event( 2, () => { console.log('2 Secondes', Date.now())}, TIME_UNIT.SECOND))\r\n    chronologie.addEvent(new Event( 4, () => { console.log('4 Secondes', Date.now())}))\r\n    chronologie.addEvent(new Event( 100, () => { console.log('100 Millisecondes', Date.now())}, TIME_UNIT.MILLISECOND))\r\n    chronologie.addEvent(new Event( 2.3, () => { console.log('2.3 Secondes', Date.now())}, TIME_UNIT.SECOND))\r\n    chronologie.addEvent(new Event( 1, () => { console.log('1 Minutes')}, TIME_UNIT.MINUT))\r\n    chronologie.addEvent(new Event( 1.2, () => { console.log('1.2 Minutes')}, TIME_UNIT.MINUT))\r\n\r\n    const eventElement = document.querySelector('#events')\r\n\r\n    let eventIdx = 0\r\n    chronologie.events?.forEach(evt => {\r\n        const newElement = document.createElement('p')\r\n        newElement.innerHTML = `${eventIdx} : ${evt.timeTrigger} ${evt.timeUnit} => ${evt.triggered}`\r\n        eventElement.appendChild(newElement)\r\n        eventIdx++\r\n    })\r\n\r\n    startBtn.addEventListener('click', () => {\r\n        try {\r\n            chronologie.start()\r\n        } catch (e) {\r\n            console.error('start', e)\r\n        }\r\n    })\r\n\r\n    stopBtn.addEventListener('click', () => {\r\n        try {\r\n            chronologie.stop()\r\n        } catch (e) {\r\n            console.error('stop', e)\r\n        }\r\n    })\r\n\r\n    restartBtn.addEventListener('click', () => {\r\n        try {\r\n            chronologie.restart()\r\n        } catch (e) {\r\n            console.error('stop', e)\r\n        }\r\n    })\r\n}"]}